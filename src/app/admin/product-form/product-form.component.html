<div>
  <div class="groupItems">
    <md-card>
      <ng-container *ngIf="idFromUrl">
        <md-menu #formOptions="mdMenu">
          <button (click)="deleteProduct()" md-menu-item>Delete</button>
        </md-menu>
      
        <button [mdMenuTriggerFor]="formOptions" md-icon-button class="deleteButton">
          <i class="material-icons">more_vert</i>
        </button>
      </ng-container>
      

      <md-card-header>{{formDisplay}}</md-card-header>
      <br>
      <md-card-content>
        <form #addProductForm="ngForm" (ngSubmit)="onSubmit($event,addProductForm.value)">
          <md-form-field color="warn">
            <input #title="ngModel" [(ngModel)]="product.title" name="title" type="text" mdInput required placeholder="Title"/>
          </md-form-field>
    
          <div *ngIf="title.touched && title.invalid" class="errorMessage">Title is required!<br><br></div>
          
          <md-form-field color="warn">
            <input #price="ngModel" [(ngModel)]="product.price" name="price" type="number" mdInput required placeholder="Price ($)" [min]="0"/>
          </md-form-field>
          
          <div *ngIf="price.touched && price.invalid" class="errorMessage">
            <div *ngIf="price.errors.required">Price is required!</div>
            <div *ngIf="price.errors.min">Price should be 0 or higher!</div>
            <br><br>
          </div>
    
          <md-select #category="ngModel" [(ngModel)]="product.category" name="category" color="warn" required placeholder="Category">
            <md-option *ngFor="let eachCategory of categories$ | async" [value]="eachCategory.$key">
              {{eachCategory.name}}
            </md-option>
          </md-select>
          <br><br>
    
          <div *ngIf="category.touched && category.invalid" class="errorMessage">Category is required!<br><br></div>
          
          <md-form-field color="warn">
            <input #imageUrl="ngModel" [(ngModel)]="product.imageUrl" name="imageUrl" type="text" mdInput required placeholder="Image URL" url/>
          </md-form-field>
          
          <div *ngIf="imageUrl.touched && imageUrl.invalid" class="errorMessage">
            <div *ngIf="imageUrl.errors.required">Image URL is required!</div>
            <div *ngIf="imageUrl.errors.url">Please enter a valid URL</div>
            <br><br>
          </div>
    
          <md-card-actions>
            <button [disabled]="!addProductForm.valid" md-button color="warn" class="eShopButton">{{submitButtonDisplay}}</button>
          </md-card-actions>
        </form>
      </md-card-content>
    </md-card>
  </div>

  <!-- Product Preview HTML-->
  <div class="groupItems">
    <md-card>
      <img *ngIf="product.imageUrl" [src]="product.imageUrl" md-card-image>

      <md-card-content>
        <h4>{{product.title}}</h4>
        <p *ngIf="product.price || product.price === 0">{{product.price | currency:'USD':true}}</p>
      </md-card-content>
    </md-card>
  </div>
</div>
